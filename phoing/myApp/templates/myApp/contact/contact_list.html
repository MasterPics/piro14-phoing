{% extends 'myApp/layout.html' %}
{% load static %}

{% block content %}


<div>
    <!--filter - 검색과 유사-->
    <div>
        <ul class="category">
            <li><a href="javascript:void(0)" onclick="onClickLink('all')">All</a></li>
            <li><a href="javascript:void(0)" onclick="onClickLink('photographer')">Photographer</a></li>
            <li><a href="javascript:void(0)" onclick="onClickLink('model')">Model</a></li>
            <li><a href="javascript:void(0)" onclick="onClickLink('HairMakeup')">Hair/Makeup</a></li>
            <li><a href="javascript:void(0)" onclick="onClickLink('stylist')">Stylist</a></li>
            <li><a href="javascript:void(0)" onclick="onClickLink('other use')">Other Use</a></li>
        </ul>
    </div>


    <!--정렬-->
    <div>
        <select name="" id="" class="form-control sort ">
            <option value="recent" {% if sort == 'recent' %}selected{% endif %}>
                최신순
            </option>
            <option value="save" {% if sort == 'save' %}selected{% endif %}>
                저장순
            </option>
            <option value="pay" {% if sort == 'pay' %}selected{% endif %}>
                가격순
            </option>
        </select>
    </div>

    <!--검색-->
    <div class="col-4 input-group">
        <input type="text" class="form-control search" value="{{ search|default_if_none:"" }}">
        <div class="input-group-append">
            <button class="btn btn-outline-secondary btn_search" type="button" id="">찾기</button>
        </div>
    </div>
</div>

{% for contact in contacts %}
<p>{{ contact.user }}</p>
<p>{{ contact.save_users.count }} </p>
<p>{{ contact.pay }}</p>
<a href="{% url 'myApp:contact_detail' contact.pk %}">
    <p>{{ contact.title }}</p>
</a>
{% endfor %}
<a class="update_btn" href="{% url 'myApp:contact_create' %}">contact 만들기</a>
<form id="searchForm" method="get" action="{% url 'myApp:contact_list' %}">
    <input type="hidden" id="category" name="category" value="{{ category }}">
    <input type="hidden" id="search" name="search" value="{{ search|default_if_none:'' }}">
    <input type="hidden" id="sort" name="sort" value="{{ sort }}">
</form>

{% endblock content %}

{% block script %}
<script type='text/javascript'>
    const onClickLink = (category) => {
        console.log(category)
        const categoryIdInput = document.querySelector('#category')
        categoryIdInput.value = category
        console.log(categoryIdInput.value)
        const searchForm = document.querySelector('#searchForm')
        searchForm.submit()
    }

    const searchButton = document.querySelector('.btn_search')
    searchButton.addEventListener('click', () => {
        const searchClassInput = document.querySelector('.search')
        const searchIdInput = document.querySelector('#search')
        const searchForm = document.querySelector('#searchForm')
        searchIdInput.value = searchClassInput.value
        searchForm.submit()
    })

    const sortClassInput = document.querySelector('.sort')
    sortClassInput.addEventListener('input', (e) => {
        const sortIdInput = document.querySelector('#sort')
        const searchForm = document.querySelector('#searchForm')
        sortIdInput.value = e.target.value
        searchForm.submit()
    })
</script>
{% endblock script %}